<% if @response && @response[0] && @target %>
	$("#<%= @target %>").find("#name_content").first().val("<%= @response[0]["toponymName"] %>");
	$("#<%= @target %>").find("#latitude_content").first().val(<%= @response[0]["lat"] %>);
	$("#<%= @target %>").find("#longitude_content").first().val(<%= @response[0]["lng"] %>);
	$("#<%= @target %>").find("#population_content").first().val(<%= @response[0]["population"] %>);
	$("#<%= @target %>").find("#gazetteer_content").first().val("geonames");
	$("#<%= @target %>").find("#gazref_content").first().val("<%= @response[0]["geonameId"] %>");
	$("#<%= @target %>").find("#type_content").first().val("<%= @response[0]["fcode"] %>");
	$("#<%= @target %>").find("#country_content").first().val("<%= @response[0]["countryCode"] %>");
	clearMapMarkers();
	addMarkerToMap(<%= @marker.to_json.html_safe %>);
	<% if @response.count > 1 %>
		$("#alternatives").html("<%= escape_javascript(raw render partial: "/geo_viz/placenames/alternatives", layout: false) %>");
		var nameParent = $("#extract-controls #name_content").parent();
		if ($(nameParent).find(".btn").length == 0) {
			$(nameParent).append('<%= link_to content_tag(:span, "", class: "glyphicon glyphicon-globe"), "#alternatives", :class => "btn btn-xs input-group-addon", "data-toggle" => "modal" %>');
		}
	<% end %>
<% end %>
